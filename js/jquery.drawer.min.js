(function($){var Base;var settings;var isOpen;var Open;var Close;var Cls;var Id;var NS;var GetAlignment;var Toggle;var Callback;var methods={init:function(options){Base=$(this);settings=$.extend({swipeEnabled:true,namespace:"plg-",open:null,close:null,pushBody:false},options);NS=function($selector){return settings.namespace+$selector};Cls=function($selector){return"."+NS($selector)};Id=function($selector){return"#"+NS($selector)};Callback=function($cb){if(typeof settings[$cb]==="function")return settings[$cb]()};
isOpen=function(){if(Base.hasClass(NS("collapsed")))return true;else return false};Open=function(){if(!isOpen()){Base.addClass(NS("collapsed"));Callback("open");return true}else return false};Close=function(){if(isOpen()){Base.removeClass(NS("collapsed"));Base.find("*").removeClass(NS("collapsed"));Base.find("li ul").slideUp(200);Callback("close");return true}else return false};GetAlignment=function(){if(Base.hasClass(NS("align-right")))return"right";else return"left"};Toggle=function(){if(!Open())Close()};
if(settings.swipeEnabled===true)if(jQuery().swipe)$(Cls("drawer-menu")).swipe({swipe:function(e,dir,dist){var align=GetAlignment();if(dir===align&&isOpen())Close();else if(dir!==align&&!isOpen())Open()},distance:0});else $.error("jquery.swipe plugin not loaded, cannot use swipe in PlugDrawerMenu without it");Base.find(Cls("drawer-toggle-trigger")).click(function(e){e.preventDefault();return Toggle()});Base.find(Cls("collapse-toggle")).click(function(e){$(this).closest("li").toggleClass(NS("collapsed"));
$(this).parent("a").siblings("ul").slideToggle();e.preventDefault()})},toggle:function(){return Toggle()},open:function(){return Open()},close:function(){return Close()},isOpen:function(){return isOpen()}};$.fn.PlugDrawerMenu=function(options){if(typeof options==="object"||!options)return methods.init.apply(this,arguments);else if(methods[options])return methods[options].apply(this,Array.prototype.slice.call(arguments,1));else $.error("No such method: "+options+" does not exist on PlugDrawerMenu")}})(jQuery);
